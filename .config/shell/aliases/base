#
# Common shell aliases for all systems
#
# Author: Rafael Cavalcanti


# Also check command after sudo for alias (see man bash)
alias sudo="sudo "
alias watch="watch "

# Increase verbosity and prompt before overwriting (for rm, prompt
# before removing directory or more than 3 files)
alias cp="cp -vi"
alias mv="mv -vi"
alias rm="rm -vI"
alias ln="ln -vi"

# Human-readable output
alias df="df -h"
alias free="free -h"

# Coloured output
alias ls="ls --color=auto"
alias grep="grep --color=auto"
#alias fgrep='fgrep --color=auto'
#alias egrep='egrep --color=auto'

# ls
alias ll="ls -laFh"

# Shell
alias c="clear"
alias q="exit"
alias x="exit"

# Edit
alias e="vim"
alias ea="vim $ALIASES_DIR"
alias ev="vim ~/.vimrc"
alias ez="vim $ZDOTDIR/.zshrc"

# Browsing
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias z.="cd ~/.config/yadm"
[ -d ~/.local/bin ] && alias zb="cd ~/.local/bin"
[ -d ~/.local/opt/scripts ] && alias zt="cd ~/.local/opt/scripts"
[ -d /opt/scripts ] && alias zt="cd /opt/scripts"
[ -d ~/Code ] && alias zc="cd ~/Code"
[ -d ~/Downloads ] && alias zd="cd ~/Downloads"
[ -d /mnt/c/Users/rccav ] && alias zh="cd /mnt/c/Users/rccav"

# Git
alias gbro="hub browse"
alias gd="git diff -- ':!package-lock.json' ':!yarn.lock'"
alias glo="git log --graph --pretty=format:'%Cred%h - %an - %ar %Cblue%d%n  %Cgreen %s%n'"
alias glon="glo --name-only"

# yadm
alias ya="yadm add"
alias yau="yadm add -u"
alias ybro="xdg-open https://github.com/rccavalcanti/dotfiles"
alias yc="yadm commit -v"
alias yc!="yadm commit -v --amend"
alias yd="yadm diff"
alias yl="yadm pull"
alias ylo="yadm log --graph --pretty=format:'%Cred%h - %an - %ar %Cblue%d%n  %Cgreen %s%n'"
alias ylon="ylo --name-only"
alias yp="yadm push"
alias ypf="yadm push --force-with-lease"
alias yst="yadm status"

# Easier commands
alias cx="chmod +x"
alias s="ssh"
alias v="vnc"

# HTTP server
alias hs="python3 -m http.server"

# Run NPM module markdown-link-check
mlc() {
	find $1 -name \*.md -exec markdown-link-check -p {} \;
}

# Find broken links
alias fbl="find . -xtype l"

# Record audio
alias rau="arecord -vv -f cd | ffmpeg -loglevel 24 -i - "$HOME/Downloads/rec_$(date +%FT%H%M%S).mp3""

# Generate string from /dev/urandom (http://www.commandlinefu.com/commands/view/7234/create-random-string-from-devurandom-or-another-length)
alias rand_alpha="cat /dev/urandom | tr -dc '[:alnum:]' | head -c64 && echo"
alias rand_lower="cat /dev/urandom | tr -dc '[:lower:]' | head -c64 && echo"

# Mirrors
## Manjaro
if command -v pacman-mirrors > /dev/null; then
	alias pm="sudo pacman-mirrors -f 10"
## Arch
elif command -v reflector > /dev/null; then
	alias pm="sudo reflector -l 5 --sort rate \
		--save /etc/pacman.d/mirrorlist && echo 'OK.' && sudo pacman -Syy"
fi

# System
alias reb="reboot || { echo 'Trying sudo...'; sudo reboot; }"
