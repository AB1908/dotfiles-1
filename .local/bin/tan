#!/bin/sh
#
# Copyright (C) 2021 Rafael Cavalcanti - rafaelc.org
# Copyright (C) 2016 djp <djp@cutter>
#
# Distributed under terms of the MIT license.
#

ID=$*
if ! echo "$ID" | grep -q '[0-9]\+'; then
    echo "  ERROR: twan command must be followed by a single task ID"
    exit 1
fi

FILE="`mktemp`"
EDITOR="${EDITOR:-vi}"
$EDITOR "$FILE"

if [ `which -l $FILE` -gt 1 ]; then
    ANNOTATION="`echo -n "\n"; cat $FILE`"
else
    ANNOTATION="`cat $FILE`"
fi
task $ID annotate "$ANNOTATION"

rm "$FILE"
exit 0

