#!/usr/bin/env bash
#
# dmenu script for power commands
#
# Author: Rafael Cavalcanti - rafaelc.org

readonly color_bg_normal="#730a0a"
readonly color_bg_selected="#c20000"

readonly options="$(cat <<-END
	Htop#$TERMINAL -e htop
	System monitor#ksysguard
	Lock#slock
	Restart dwm#killall -HUP dwm
	Switch user#gdmflexiserver
	Logout#killall -TERM dwm
	Suspend#systemctl suspend
	Reboot#systemctl reboot
	Poweroff#systemctl poweroff
END
)"

readonly chosen="$(cut -d# -f1 <(printf "%s" "$options") | dmenu -p "Power menu:" -nb "$color_bg_normal" -sb "$color_bg_selected" "$@")"
[[ -z "$chosen" ]] && exit

readonly cmd="$(grep "$chosen" <(printf "%s" "$options") | cut -d# -f2)"
exec $cmd
